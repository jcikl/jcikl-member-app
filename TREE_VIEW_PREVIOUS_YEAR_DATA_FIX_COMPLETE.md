# âœ… ä¿®å¤æ ‘å½¢è§†å›¾å‰ä¸€å¹´æ•°æ®æ˜¾ç¤ºä¸º0çš„é—®é¢˜

**ä¿®å¤æ—¶é—´**: 2025-01-13  
**é—®é¢˜**: æ ‘å½¢è¡¨æ ¼ç¬¬3åˆ—ï¼ˆå‰ä¸€å¹´ï¼‰æ˜¾ç¤ºä¸º RM 0.00  
**çŠ¶æ€**: âœ… å·²ä¿®å¤

---

## ðŸŽ¯ é—®é¢˜æè¿°

### é—®é¢˜è¡¨çŽ°

- ç¬¬1åˆ—: è´¦æˆ·/é¡¹ç›®åç§° âœ…
- ç¬¬2åˆ—: 2024 (RM) æˆ– FY2024 (RM) âœ… æ˜¾ç¤ºæ­£ç¡®çš„æ•°æ®
- ç¬¬3åˆ—: 2023 (RM) æˆ– FY2023 (RM) âŒ **å…¨éƒ¨æ˜¾ç¤º RM 0.00**

**æ ¹æœ¬åŽŸå› **: 
æ•°æ®è¿‡æ»¤é€»è¾‘åªä¿ç•™äº†å½“å‰é€‰æ‹©å¹´ä»½çš„æ•°æ®ï¼Œå¯¼è‡´å‰ä¸€å¹´çš„æ•°æ®è¢«å®Œå…¨è¿‡æ»¤æŽ‰ã€‚

---

## ðŸ” é—®é¢˜æ ¹æºåˆ†æž

### åŽŸå§‹è¿‡æ»¤é€»è¾‘ï¼ˆé”™è¯¯ï¼‰âŒ

**ä½ç½®**: Line 1615-1647ï¼ˆä¿®å¤å‰ï¼‰

```typescript
// ðŸš« é—®é¢˜ä»£ç ï¼šåªè¿‡æ»¤å½“å‰å¹´ä»½
if (treeDateRangeType !== 'all') {
  const year = parseInt(treeSelectedYear);
  
  realTransactions = realTransactions.filter(transaction => {
    const txYear = txDate.getFullYear();
    
    if (treeDateRangeType === 'fiscal') {
      return txDateåœ¨è´¢å¹´å†…; // åªä¿ç•™å½“å‰è´¢å¹´
    } else if (treeDateRangeType === 'calendar') {
      return txYear === year; // åªä¿ç•™å½“å‰å¹´ âŒ
    }
  });
}
```

**é—®é¢˜**:
- âœ… ç¬¬2åˆ—ï¼šæ•°æ®å­˜åœ¨ï¼ˆå½“å‰å¹´æ•°æ®è¢«ä¿ç•™ï¼‰
- âŒ ç¬¬3åˆ—ï¼šæ•°æ®ä¸º0ï¼ˆå‰ä¸€å¹´æ•°æ®è¢«è¿‡æ»¤æŽ‰ï¼‰

---

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤åŽçš„è¿‡æ»¤é€»è¾‘ âœ…

**ä½ç½®**: Line 1614-1655

```typescript
// ðŸ”§ ä¿®å¤ï¼šä¿ç•™å½“å‰å¹´å’Œå‰ä¸€å¹´çš„æ•°æ®ç”¨äºŽç»Ÿè®¡å¯¹æ¯”
if (treeDateRangeType !== 'all') {
  const year = parseInt(treeSelectedYear);
  const previousYear = year - 1; // ðŸ†• å‰ä¸€å¹´
  
  realTransactions = realTransactions.filter(transaction => {
    const txYear = txDate.getFullYear();
    
    if (treeDateRangeType === 'fiscal') {
      // ðŸ†• ä¿ç•™å½“å‰è´¢å¹´å’Œå‰ä¸€ä¸ªè´¢å¹´çš„æ•°æ®
      const inCurrentFiscal = txDateåœ¨å½“å‰è´¢å¹´å†…;
      const inPreviousFiscal = txDateåœ¨å‰è´¢å¹´å†…;
      return inCurrentFiscal || inPreviousFiscal; // âœ… ä¸¤ä¸ªè´¢å¹´éƒ½ä¿ç•™
      
    } else if (treeDateRangeType === 'calendar') {
      // ðŸ†• ä¿ç•™å½“å‰å¹´å’Œå‰ä¸€å¹´çš„æ•°æ®
      return txYear === year || txYear === previousYear; // âœ… ä¸¤ä¸ªå¹´ä»½éƒ½ä¿ç•™
    }
  });
}
```

---

## ðŸ”§ å…·ä½“å®žçŽ°

### 1. è´¢å¹´æ¨¡å¼ (fiscal)

**ä¿®å¤å‰** âŒ:
```typescript
const fiscalPeriod = smartFiscalYearService.detectFiscalYearPeriod(year);
return txDateStr >= fiscalPeriod.startDate && txDateStr <= fiscalPeriod.endDate;
```

**ä¿®å¤åŽ** âœ…:
```typescript
const fiscalPeriod = smartFiscalYearService.detectFiscalYearPeriod(year);
const inCurrentFiscal = txDateStr >= fiscalPeriod.startDate && txDateStr <= fiscalPeriod.endDate;

// æ£€æŸ¥å‰ä¸€ä¸ªè´¢å¹´
const previousFiscalPeriod = smartFiscalYearService.detectFiscalYearPeriod(previousYear);
const inPreviousFiscal = txDateStr >= previousFiscalPeriod.startDate && txDateStr <= previousFiscalPeriod.endDate;

return inCurrentFiscal || inPreviousFiscal;
```

**æ•ˆæžœ**:
- âœ… FY2025: æ˜¾ç¤ºå½“å‰è´¢å¹´æ•°æ®
- âœ… FY2024: æ˜¾ç¤ºå‰ä¸€ä¸ªè´¢å¹´æ•°æ®ï¼ˆä¸å†ä¸º0ï¼‰

---

### 2. è‡ªç„¶å¹´æ¨¡å¼ (calendar)

**ä¿®å¤å‰** âŒ:
```typescript
return txYear === year; // åªä¿ç•™å½“å‰å¹´
```

**ä¿®å¤åŽ** âœ…:
```typescript
return txYear === year || txYear === previousYear; // ä¿ç•™å½“å‰å¹´å’Œå‰ä¸€å¹´
```

**æ•ˆæžœ**:
- âœ… 2025: æ˜¾ç¤º2025å¹´æ•°æ®
- âœ… 2024: æ˜¾ç¤º2024å¹´æ•°æ®ï¼ˆä¸å†ä¸º0ï¼‰

---

## ðŸ“Š æ•°æ®æµç¨‹

### ä¿®å¤åŽçš„æ•°æ®æµ

```
åŠ è½½æ‰€æœ‰äº¤æ˜“æ•°æ®
    â†“
è¿‡æ»¤è™šæ‹Ÿå­äº¤æ˜“
    â†“
æŒ‰æ—¥æœŸèŒƒå›´è¿‡æ»¤ï¼ˆè´¢å¹´æˆ–è‡ªç„¶å¹´ï¼‰
    â”œâ”€ å½“å‰å¹´ï¼šä¿ç•™ âœ…
    â””â”€ å‰ä¸€å¹´ï¼šä¹Ÿä¿ç•™ âœ…  ðŸ†•
    â†“
ä¼ é€’ç»™ buildTreeTableData
    â†“
calculateYearlyStats è®¡ç®—ç»Ÿè®¡
    â”œâ”€ å½“å‰å¹´ç»Ÿè®¡ âœ…
    â””â”€ å‰ä¸€å¹´ç»Ÿè®¡ âœ…  ðŸ†•
    â†“
æ˜¾ç¤ºåœ¨è¡¨æ ¼ä¸­
    â”œâ”€ ç¬¬2åˆ—ï¼šå½“å‰å¹´æ•°æ® âœ…
    â””â”€ ç¬¬3åˆ—ï¼šå‰ä¸€å¹´æ•°æ® âœ…ï¼ˆä¸å†æ˜¯0ï¼‰
```

---

## ðŸŽ¯ ä¿®å¤å‰åŽå¯¹æ¯”

### ä¿®å¤å‰ âŒ

**è´¢å¹´æ¨¡å¼ï¼ˆé€‰æ‹© FY2025ï¼‰**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è´¦æˆ·/é¡¹ç›®åç§°        â”‚ FY2025 (RM)  â”‚ FY2024 (RM)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ”¶å…¥                â”‚  RM 10000.00 â”‚  RM 0.00     â”‚ âŒ å‰ä¸€å¹´æ˜¾ç¤º0
â”‚ æ´»åŠ¨è´¢åŠ¡ (10)        â”‚  RM 5000.00  â”‚  RM 0.00     â”‚ âŒ å‰ä¸€å¹´æ˜¾ç¤º0
â”‚ VP Community        â”‚  RM 2000.00  â”‚  RM 0.00     â”‚ âŒ å‰ä¸€å¹´æ˜¾ç¤º0
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¿®å¤åŽ âœ…

**è´¢å¹´æ¨¡å¼ï¼ˆé€‰æ‹© FY2025ï¼‰**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è´¦æˆ·/é¡¹ç›®åç§°        â”‚ FY2025 (RM)  â”‚ FY2024 (RM)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ”¶å…¥                â”‚  RM 10000.00 â”‚  RM 8000.00  â”‚ âœ… å‰ä¸€å¹´æœ‰æ•°æ®
â”‚ æ´»åŠ¨è´¢åŠ¡ (10)        â”‚  RM 5000.00  â”‚  RM 4000.00  â”‚ âœ… å‰ä¸€å¹´æœ‰æ•°æ®
â”‚ VP Community        â”‚  RM 2000.00  â”‚  RM 1500.00  â”‚ âœ… å‰ä¸€å¹´æœ‰æ•°æ®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ§ª æµ‹è¯•åœºæ™¯

### åœºæ™¯1: è´¢å¹´æ¨¡å¼

**æ“ä½œ**:
1. é€‰æ‹©æ—¥æœŸèŒƒå›´: "è´¢å¹´(åŸºäºŽé…ç½®)"
2. é€‰æ‹©è´¢å¹´: "FY2025"
3. æŸ¥çœ‹æ ‘å½¢è¡¨æ ¼

**é¢„æœŸç»“æžœ**:
- âœ… ç¬¬2åˆ—: FY2025 æ˜¾ç¤º 2025-07-01 è‡³ 2026-06-30 çš„æ•°æ®
- âœ… ç¬¬3åˆ—: FY2024 æ˜¾ç¤º 2024-07-01 è‡³ 2025-06-30 çš„æ•°æ®
- âœ… ä¸¤åˆ—éƒ½æœ‰éž0çš„é‡‘é¢æ˜¾ç¤º

---

### åœºæ™¯2: è‡ªç„¶å¹´æ¨¡å¼

**æ“ä½œ**:
1. é€‰æ‹©æ—¥æœŸèŒƒå›´: "è‡ªç„¶å¹´(1æœˆ-12æœˆ)"
2. é€‰æ‹©å¹´ä»½: "2025"
3. æŸ¥çœ‹æ ‘å½¢è¡¨æ ¼

**é¢„æœŸç»“æžœ**:
- âœ… ç¬¬2åˆ—: 2025 (RM) æ˜¾ç¤º 2025-01-01 è‡³ 2025-12-31 çš„æ•°æ®
- âœ… ç¬¬3åˆ—: 2024 (RM) æ˜¾ç¤º 2024-01-01 è‡³ 2024-12-31 çš„æ•°æ®
- âœ… ä¸¤åˆ—éƒ½æœ‰éž0çš„é‡‘é¢æ˜¾ç¤º

---

## ðŸ“ å…³é”®æ”¹åŠ¨

### ä¿®æ”¹ä½ç½®

**æ–‡ä»¶**: `src/modules/finance/pages/TransactionManagementPage/index.tsx`  
**ä½ç½®**: Line 1614-1655

### æ ¸å¿ƒæ”¹åŠ¨

1. âœ… æ·»åŠ  `previousYear` å˜é‡
2. âœ… è´¢å¹´æ¨¡å¼ï¼šæ£€æŸ¥ä¸¤ä¸ªè´¢å¹´èŒƒå›´ï¼ˆå½“å‰ + å‰ä¸€ä¸ªï¼‰
3. âœ… è‡ªç„¶å¹´æ¨¡å¼ï¼šæ£€æŸ¥ä¸¤ä¸ªè‡ªç„¶å¹´ï¼ˆå½“å‰å¹´ + å‰ä¸€å¹´ï¼‰
4. âœ… ä½¿ç”¨ `||` æ“ä½œç¬¦ä¿ç•™ä¸¤ä¸ªå¹´ä»½çš„æ•°æ®

---

## âœ… æ€»ç»“

### é—®é¢˜åŽŸå› 

- âŒ åŽŸå§‹é€»è¾‘åªè¿‡æ»¤å½“å‰é€‰æ‹©å¹´ä»½
- âŒ å‰ä¸€å¹´æ•°æ®è¢«è¿‡æ»¤æŽ‰
- âŒ å¯¼è‡´ç¬¬3åˆ—æ˜¾ç¤º RM 0.00

### ä¿®å¤æ–¹æ¡ˆ

- âœ… åŒæ—¶ä¿ç•™å½“å‰å¹´å’Œå‰ä¸€å¹´çš„æ•°æ®
- âœ… è´¢å¹´æ¨¡å¼ä¿ç•™ä¸¤ä¸ªè´¢å¹´
- âœ… è‡ªç„¶å¹´æ¨¡å¼ä¿ç•™ä¸¤ä¸ªè‡ªç„¶å¹´
- âœ… å¹´åº¦å¯¹æ¯”åŠŸèƒ½æ­£å¸¸å·¥ä½œ

### ä¿®å¤æ•ˆæžœ

- âœ… ç¬¬3åˆ—ä¸å†æ˜¾ç¤º 0
- âœ… å¯ä»¥æ­£ç¡®å¯¹æ¯”ä¸¤å¹´æ•°æ®
- âœ… è´¢å¹´å’Œè‡ªç„¶å¹´æ¨¡å¼éƒ½æ­£å¸¸å·¥ä½œ

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2025-01-13  
**çŠ¶æ€**: âœ… å·²å®Œæˆ
