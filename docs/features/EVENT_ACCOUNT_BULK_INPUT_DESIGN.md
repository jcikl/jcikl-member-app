# 活动账户页面 - 批量财务记录输入设计

## 📋 需求概述

在活动账户管理页面的"预测"标签页中，添加双卡片布局：
- **左侧卡片**: 紧凑的批量输入表单
- **右侧卡片**: 财务记录列表显示

## 🎨 UI 设计示例

### 整体布局
```
┌─────────────────────────────────────────────────────────────────┐
│                    活动账户管理 - 预测标签页                        │
├─────────────────────────────────────────────────────────────────┤
│  [全部] [实际] [预测] ← 当前标签页                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────┐  ┌─────────────────────────────┐   │
│  │    📝 批量输入财务记录    │  │    📊 财务记录列表           │   │
│  │                         │  │                             │   │
│  │  Sn Description Remark  │  │  Sn Description Remark     │   │
│  │  1  [输入框] [输入框]    │  │  1  会员费A   备注A          │   │
│  │  2  [输入框] [输入框]    │  │  2  会员费B   备注B          │   │
│  │  3  [输入框] [输入框]    │  │  3  非会员费A 备注C          │   │
│  │  4  [输入框] [输入框]    │  │  ...                       │   │
│  │  5  [输入框] [输入框]    │  │                             │   │
│  │                         │  │  💰 总收入: RM 6,265.00     │   │
│  │  Amount (Income) Total  │  │  📅 最后更新: 2025-01-13    │   │
│  │  [220.00] [220.00]      │  │                             │   │
│  │  [250.00] [250.00]      │  │  [刷新] [导出] [编辑]        │   │
│  │  [220.00] [220.00]      │  │                             │   │
│  │  [220.00] [220.00]      │  │                             │   │
│  │  [220.00] [220.00]      │  │                             │   │
│  │                         │  │                             │   │
│  │  💰 小计: RM 1,130.00   │  │                             │   │
│  │                         │  │                             │   │
│  │  [➕ 添加行] [🗑️ 清空]   │  │                             │   │
│  │  [💾 保存全部]           │  │                             │   │
│  └─────────────────────────┘  └─────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## 📝 左侧卡片 - 批量输入表单

### 表单结构
```
┌─────────────────────────────────────────┐
│  📝 批量输入财务记录                      │
├─────────────────────────────────────────┤
│                                         │
│  Sn │ Description    │ Remark │ Amount  │
│  ───┼────────────────┼────────┼─────────│
│  1  │ [会员费A      ] │ [备注A] │ [220.00]│
│  2  │ [会员费B      ] │ [备注B] │ [250.00]│
│  3  │ [非会员费A    ] │ [备注C] │ [220.00]│
│  4  │ [会员费C      ] │ [备注D] │ [220.00]│
│  5  │ [会员费D      ] │ [备注E] │ [220.00]│
│                                         │
│  💰 小计: RM 1,130.00                   │
│                                         │
│  [➕ 添加行] [🗑️ 清空] [💾 保存全部]    │
└─────────────────────────────────────────┘
```

### 功能说明
- **动态行数**: 默认5行，可点击"➕ 添加行"增加
- **自动计算**: 实时计算小计金额
- **快速清空**: 一键清空所有输入
- **批量保存**: 一次性保存所有记录

## 📊 右侧卡片 - 财务记录列表

### 列表结构
```
┌─────────────────────────────────────────┐
│  📊 财务记录列表                         │
├─────────────────────────────────────────┤
│                                         │
│  Sn │ Description    │ Remark │ Amount │
│  ───┼────────────────┼────────┼─────────│
│  1  │ 会员费A         │ 备注A   │ 220.00 │
│  2  │ 会员费B         │ 备注B   │ 250.00 │
│  3  │ 非会员费A       │ 备注C   │ 220.00 │
│  4  │ 会员费C         │ 备注D   │ 220.00 │
│  5  │ 会员费D         │ 备注E   │ 220.00 │
│  6  │ 会员费E         │ 备注F   │ 220.00 │
│  7  │ 非会员费B       │ 备注G   │ 250.00 │
│  8  │ 会员费F         │ 备注H   │ 220.00 │
│  9  │ 会员费G         │ 备注I   │ 220.00 │
│  10 │ 会员费H         │ 备注J   │ 220.00 │
│  11 │ 会员费I         │ 备注K   │ 220.00 │
│  12 │ 会员费J         │ 备注L   │ 220.00 │
│  13 │ 会员费K         │ 备注M   │ 220.00 │
│  14 │ 会员费L         │ 备注N   │ 220.00 │
│  15 │ 会员费M         │ 备注O   │ 220.00 │
│  16 │ 会员费N         │ 备注P   │ 220.00 │
│  17 │ 会员费O         │ 备注Q   │ 220.00 │
│  18 │ 会员费P         │ 备注R   │ 220.00 │
│  19 │ 会员费Q         │ 备注S   │ 220.00 │
│  20 │ 会员费R         │ 备注T   │ 220.00 │
│  21 │ 会员费S         │ 备注U   │ 220.00 │
│                                         │
│  💰 总收入: RM 4,615.00                 │
│  📅 最后更新: 2025-01-13 14:30          │
│                                         │
│  [🔄 刷新] [📤 导出] [✏️ 编辑]          │
└─────────────────────────────────────────┘
```

## 🔄 交互流程

### 1. 批量输入流程
```
用户操作 → 系统响应
─────────────────────
1. 打开预测标签页 → 显示双卡片布局
2. 在左侧表单输入 → 实时计算小计
3. 点击"➕ 添加行" → 新增一行输入框
4. 点击"💾 保存全部" → 批量创建记录
5. 保存成功 → 右侧列表自动刷新
```

### 2. 数据验证
```
输入验证规则:
─────────────────────
- Description: 必填，最大50字符
- Remark: 可选，最大100字符  
- Amount: 必填，数字格式，> 0
- 至少需要1行有效数据才能保存
```

## 🎯 技术实现要点

### 1. 状态管理
```typescript
interface BulkInputState {
  rows: Array<{
    id: string;
    description: string;
    remark: string;
    amount: number;
  }>;
  totalAmount: number;
  isSaving: boolean;
}
```

### 2. 表单验证
```typescript
const validateBulkInput = (rows: BulkInputRow[]) => {
  return rows.every(row => 
    row.description.trim() && 
    row.amount > 0
  );
};
```

### 3. 批量保存
```typescript
const saveBulkRecords = async (rows: BulkInputRow[]) => {
  const batch = writeBatch(db);
  
  rows.forEach(row => {
    const docRef = doc(collection(db, 'eventAccounts', eventId, 'transactions'));
    batch.set(docRef, {
      ...row,
      transactionType: 'income',
      isForecast: true,
      createdAt: Timestamp.now()
    });
  });
  
  await batch.commit();
};
```

## 📱 响应式设计

### 桌面版 (≥1200px)
- 双卡片并排显示
- 左侧40%，右侧60%

### 平板版 (768px - 1199px)  
- 双卡片垂直堆叠
- 左侧在上，右侧在下

### 手机版 (<768px)
- 单卡片切换模式
- 标签页切换"输入"和"列表"

## 🎨 视觉设计

### 颜色方案
- **主色调**: #1890ff (Ant Design 蓝)
- **成功色**: #52c41a (绿色)
- **警告色**: #faad14 (橙色)
- **错误色**: #ff4d4f (红色)

### 字体大小
- **标题**: 16px, font-weight: 600
- **表格头**: 14px, font-weight: 500
- **输入框**: 14px
- **金额**: 14px, font-weight: 500

### 间距
- **卡片间距**: 16px
- **表格行高**: 40px
- **按钮间距**: 8px

---

**设计目标**: 提供高效、直观的批量财务记录输入体验，减少用户操作步骤，提高数据录入效率。
