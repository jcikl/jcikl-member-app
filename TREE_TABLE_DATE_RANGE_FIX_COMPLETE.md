# âœ… ä¿®å¤æ ‘å½¢è¡¨æ ¼æ—¥æœŸèŒƒå›´æ˜¾ç¤ºé—®é¢˜

**ä¿®å¤æ—¶é—´**: 2025-01-13  
**é—®é¢˜**: æ ‘å½¢è¡¨æ ¼ç¬¬3åˆ—ï¼ˆå‰ä¸€å¹´ï¼‰æ ‡é¢˜æ˜¾ç¤ºä¸æ­£ç¡®  
**çŠ¶æ€**: âœ… å·²ä¿®å¤

---

## ğŸ¯ é—®é¢˜æè¿°

### ä¿®å¤å‰çš„é—®é¢˜ âŒ

æ ‘å½¢è¡¨æ ¼ç¬¬3åˆ—çš„å‰ä¸€å¹´æ ‡é¢˜æ˜¾ç¤ºä¸æ­£ç¡®ï¼š

| æ—¥æœŸèŒƒå›´ç±»å‹ | é€‰æ‹©å¹´ä»½ | ç¬¬3åˆ—æ ‡é¢˜ | é—®é¢˜ |
|------------|---------|---------|------|
| è´¢å¹´ (fiscal) | 2024 | "2023 (RM)" | âŒ åº”æ˜¾ç¤º "FY2023 (RM)" |
| è‡ªç„¶å¹´ (calendar) | 2024 | "2023 (RM)" | âœ… æ­£ç¡® |
| å…¨éƒ¨ (all) | 2024 | "2023 (RM)" | âœ… æ­£ç¡® |

### ä¿®å¤åçš„æ•ˆæœ âœ…

| æ—¥æœŸèŒƒå›´ç±»å‹ | é€‰æ‹©å¹´ä»½ | ç¬¬3åˆ—æ ‡é¢˜ | çŠ¶æ€ |
|------------|---------|---------|------|
| è´¢å¹´ (fiscal) | 2024 | "FY2023 (RM)" | âœ… æ­£ç¡® |
| è‡ªç„¶å¹´ (calendar) | 2024 | "2023 (RM)" | âœ… æ­£ç¡® |
| å…¨éƒ¨ (all) | 2024 | "2023 (RM)" | âœ… æ­£ç¡® |

---

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤ä»£ç ä½ç½®

**æ–‡ä»¶**: `src/modules/finance/pages/TransactionManagementPage/index.tsx`  
**ä½ç½®**: Line 2126-2177

### ä¿®å¤å†…å®¹

#### 1. æ·»åŠ  useMemo import (Line 8)

```typescript
import React, { useState, useEffect, useMemo } from 'react';
```

#### 2. ä¿®æ”¹ç¬¬2åˆ—æ ‡é¢˜ï¼ˆå½“å‰å¹´ä»½ï¼‰- Line 2126-2149

```typescript
{
  title: (() => {
    // åŠ¨æ€ç”Ÿæˆç¬¬2åˆ—æ ‡é¢˜ï¼ˆå½“å‰é€‰æ‹©çš„å¹´ä»½ï¼‰
    if (treeDateRangeType === 'fiscal') {
      return `FY${treeSelectedYear} (RM)`;
    } else if (treeDateRangeType === 'calendar') {
      return `${treeSelectedYear} (RM)`;
    } else {
      return `${treeSelectedYear} (RM)`;
    }
  })(),
  dataIndex: 'year2025',
  key: 'year2025',
  // ...
}
```

#### 3. ä¿®æ”¹ç¬¬3åˆ—æ ‡é¢˜ï¼ˆå‰ä¸€å¹´ï¼‰- Line 2150-2177

```typescript
{
  title: (() => {
    // ğŸ”§ åŠ¨æ€ç”Ÿæˆç¬¬3åˆ—æ ‡é¢˜ï¼ˆå‰ä¸€å¹´ï¼Œæ ¹æ®æ—¥æœŸèŒƒå›´ç±»å‹ï¼‰
    const selectedYear = parseInt(treeSelectedYear);
    const previousYear = selectedYear - 1;
    
    if (treeDateRangeType === 'fiscal') {
      return `FY${previousYear} (RM)`;
    } else if (treeDateRangeType === 'calendar') {
      return `${previousYear} (RM)`;
    } else {
      return `${previousYear} (RM)`;
    }
  })(),
  dataIndex: 'year2024',
  key: 'year2024',
  // ...
}
```

#### 4. ä½¿ç”¨ useMemo åŒ…è£¹åˆ—é…ç½® - Line 2100, 2177

```typescript
const treeTableColumns: ColumnsType<TreeTableItem> = useMemo(() => [
  // ... åˆ—é…ç½®
], [treeDateRangeType, treeSelectedYear]);
```

---

## ğŸ“Š æ˜¾ç¤ºæ•ˆæœå¯¹æ¯”

### è´¢å¹´æ¨¡å¼ (fiscal)

**ä¿®å¤å‰**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è´¦æˆ·/é¡¹ç›®åç§°        â”‚ FY2024 (RM)  â”‚ 2023 (RM)    â”‚  âŒ æ ¼å¼ä¸ä¸€è‡´
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¿®å¤å**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è´¦æˆ·/é¡¹ç›®åç§°        â”‚ FY2024 (RM)  â”‚ FY2023 (RM)  â”‚  âœ… æ ¼å¼ä¸€è‡´
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è‡ªç„¶å¹´æ¨¡å¼ (calendar)

**ä¿®å¤å**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è´¦æˆ·/é¡¹ç›®åç§°        â”‚ 2024 (RM)    â”‚ 2023 (RM)    â”‚  âœ… æ­£ç¡®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…¨éƒ¨æ¨¡å¼ (all)

**ä¿®å¤å**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è´¦æˆ·/é¡¹ç›®åç§°        â”‚ 2024 (RM)    â”‚ 2023 (RM)    â”‚  âœ… æ­£ç¡®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ è‡ªåŠ¨æ›´æ–°æœºåˆ¶

### useMemo ä¾èµ–

```typescript
const treeTableColumns = useMemo(() => [
  // åˆ—é…ç½®
], [treeDateRangeType, treeSelectedYear]);
```

**ä¾èµ–é¡¹**:
- `treeDateRangeType`: æ—¥æœŸèŒƒå›´ç±»å‹ï¼ˆfiscal | calendar | allï¼‰
- `treeSelectedYear`: é€‰æ‹©çš„å¹´ä»½

**æ•ˆæœ**:
- âœ… å½“ `treeDateRangeType` å˜åŒ–æ—¶ï¼Œåˆ—æ ‡é¢˜è‡ªåŠ¨æ›´æ–°
- âœ… å½“ `treeSelectedYear` å˜åŒ–æ—¶ï¼Œåˆ—æ ‡é¢˜è‡ªåŠ¨æ›´æ–°
- âœ… è´¢å¹´æ¨¡å¼æ˜¾ç¤º "FY2024" æ ¼å¼
- âœ… è‡ªç„¶å¹´æ¨¡å¼æ˜¾ç¤º "2024" æ ¼å¼

---

## ğŸ¯ å…³é”®é€»è¾‘

### æ ‡é¢˜ç”Ÿæˆé€»è¾‘

```
treeDateRangeType
    â”‚
    â”œâ”€> 'fiscal'
    â”‚   â””â”€> FY${year} (RM)
    â”‚
    â”œâ”€> 'calendar'
    â”‚   â””â”€> ${year} (RM)
    â”‚
    â””â”€> 'all'
        â””â”€> ${year} (RM)
```

**ç¤ºä¾‹**:
- è´¢å¹´æ¨¡å¼ + é€‰æ‹© 2024:
  - ç¬¬2åˆ—: `FY2024 (RM)` âœ…
  - ç¬¬3åˆ—: `FY2023 (RM)` âœ…
- è‡ªç„¶å¹´æ¨¡å¼ + é€‰æ‹© 2024:
  - ç¬¬2åˆ—: `2024 (RM)` âœ…
  - ç¬¬3åˆ—: `2023 (RM)` âœ…

---

## âœ… æ€»ç»“

### ä¿®å¤å†…å®¹

1. âœ… æ·»åŠ  `useMemo` import
2. âœ… ç¬¬2åˆ—æ ‡é¢˜æ ¹æ®æ—¥æœŸèŒƒå›´ç±»å‹åŠ¨æ€ç”Ÿæˆ
3. âœ… ç¬¬3åˆ—æ ‡é¢˜æ ¹æ®æ—¥æœŸèŒƒå›´ç±»å‹å’Œå‰ä¸€å¹´åŠ¨æ€ç”Ÿæˆ
4. âœ… ä½¿ç”¨ `useMemo` åŒ…è£¹åˆ—é…ç½®ï¼Œæ·»åŠ ä¾èµ–é¡¹

### ä¿®å¤æ•ˆæœ

- âœ… è´¢å¹´æ¨¡å¼ç»Ÿä¸€æ˜¾ç¤º FY å‰ç¼€
- âœ… è‡ªç„¶å¹´æ¨¡å¼æ˜¾ç¤ºæ™®é€šå¹´ä»½
- âœ… æ ‡é¢˜éšæ—¥æœŸèŒƒå›´å˜åŒ–è‡ªåŠ¨æ›´æ–°
- âœ… å‰åä¸€å¹´çš„å¯¹æ¯”æ˜¾ç¤ºæ­£ç¡®

**ä¿®å¤å®Œæˆæ—¶é—´**: 2025-01-13  
**çŠ¶æ€**: âœ… å·²å®Œæˆ

